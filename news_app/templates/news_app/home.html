<!doctype html>
{% load static %}
<html lang="ru" xmlns="http://www.w3.org/1999/html" style="background-color:#121212">
  <head>
    <meta charset="utf-8">
    <link rel="icon" href="{% static 'logo.png' %}">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@500&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.6.0.min.js"></script>
    <script src="{% static 'app.js' %}"></script>

    <title>Oneline</title>

  </head>
  <body>
      <div style="background-color:#121212">
            <div class="row" style="--bs-gutter-x:0rem">
                <div class="col-5" style="color:white; background-color:#272727; margin-bottom:0rem; padding-right:0px; padding:0px" align="right">
                    <form action="#" method="get">
                    <button type="button" class="btn btn-dark" name="refresh" onclick="window.location.reload()" style="display:none">Обновить</button>
                    </form>
                </div>

          <div class="col-7" align="left" style="">
              <h1 align="left" style="color:white; background-color:#272727; margin-bottom:0rem; padding-left:4.5rem;"><a href="/"> <img src="{% static 'logo.png' %}" width="32px" height="32px" style="padd"></a>Oneline</h1>

          </div>
                <hr style="margin:0; color:#f4ae95; opacity:1">
          </div>


            <div class="row" style="--bs-gutter-x:0rem">
                <div class="col-3"></div>
                <div class="col-6" align="center">





                <table class="table table-hover" style="border-color:#272727; color:#272727; border-bottom-color:#f4ae95;--bs-table-hover-color: #121212; --bs-table-hover-bg:rgba(0, 0, 0, 0.35);">
                {% for new in news %}
                    <tr style="" class="tr">
                        <td style="background-color:#272727" class="td">
                            <img src="{{ new.img }}" align="center" id="thumbnail" class="thumbnail">
                            <a target="_blank" href="{{ new.source }}" class="title" style="font-size:22px; color:#FFFFFF;display:">{{ new.title }}</a>
                    </tr>
                        </td>
                {% endfor %}
              </table>
              </div>
                <div class="col-3" style="--bs-gutter-x:2rem; --bs-gutter-y:.5rem;">

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="habr" id="habr"style="height:30px;width:30px;" checked="none">
                      <label class="form-check-label" for="habr" style="font-size:22px;padding-left:.4rem;padding-top:.2rem;color:#FFFFFF" value="habr">habr.com</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="tproger" id="tproger"style="height:30px;width:30px;" checked="checked" >
                      <label class="form-check-label" for="tproger" style="font-size:22px;padding-left:.4rem;padding-top:.2rem;color:#FFFFFF" >tproger.ru</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="dnews" id="dnews"style="height:30px;width:30px;checked:true" >
                      <label class="form-check-label" for="dnews" style="font-size:22px;padding-left:.4rem;padding-top:.2rem;color:#FFFFFF">3dnews.ru</label>
                    </div>
          </div>
          <div class="container" align="center">
          <div class="col-12" align="center">
              <nav aria-label="Page navigation">
                      <ul class="pagination justify-content-center">
                          {% if news.has_previous %}
                          <li class="page-item">
                              <a class="page-link" href="?habr={{ habr_enable }}&tproger={{ tproger_enable }}&dnews={{ dnews_enable }}&page=1" aria-label="Previous" style="background-color:#272727; color:#FFFFFF; border:2px solid; border-color:#f4ae95; padding:.375rem 1.4rem;">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only"></span>
                              </a>
                          </li>
                          {% endif %}

                          {% for n in news.paginator.page_range %}
                          {% if news.number == n %}
                          <li class="page-item active">
                              <span class="page-link" style="background-color:#f4ae95; color:#FFFFFF; border:2px solid; border-color:#f4ae95; padding:.375rem 1.5rem; ">{{ n }}<span class="sr-only"></span></span>
                          </li>
                          {% elif n > news.number|add:'-4' and n < news.number|add:'4' %}
                          <li class="page-item">
                              <a class="page-link " href="?habr={{ habr_enable }}&tproger={{ tproger_enable }}&dnews={{ dnews_enable }}&page={{ n }}" style="background-color:#272727; color:#FFFFFF; border:2px solid; border-color:#f4ae95; padding:.375rem 1.4rem;" >{{ n }}</a>
                          </li>
                          {% endif %}
                          {% endfor %}

                          {% if news.has_next %}
                          <li class="page-item">
                            <a class="page-link" href="?habr={{ habr_enable }}&tproger={{ tproger_enable }}&dnews={{ dnews_enable }}&page={{ news.paginator.num_pages }}" aria-label="далее" style="background-color:#272727; color:#FFFFFF;border:2px solid; border-color:#f4ae95; padding:.375rem 1.4rem; ">
                                <span class="sr-only"></span>
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                          </li>
                          {% endif %}
                      </ul>
              </nav>
          </div>
          </div>
  </div>
<script>
$('.form-check-input').click(()=>{
    let params = '?'
    $('.form-check-input:checkbox').each( (i,elem) => {
      if(elem.checked){
        params = params + `${$(elem).val()}=1&`
      }else{
        params = params + `${$(elem).val()}=0&`
      }
    });
    window.location.replace(`/${params}page={{ news.number}}`);
  })
  if (window.location.href == 'http://127.0.0.1:8000/'){
     window.location.replace('http://127.0.0.1:8000/?habr=1&tproger=1&dnews=1&page=1')
  }


  const params = new URLSearchParams(window.location.search)
  var habrCheck = document.getElementById('habr')
  var tprogerCheck = document.getElementById('tproger')
  var dnewsCheck = document.getElementById('dnews')
  console.log(params.get('habr'));
  console.log(params.get('tproger'));
  console.log(params.get('dnews'));
  if (params.get('habr') == 1) {
    habrCheck.checked = true;}
  else{
    habrCheck.checked = false;}
  if (params.get('tproger') == 1) {
    tprogerCheck.checked = true;}
  else{
    tprogerCheck.checked = false;}
  if (params.get('dnews') == 1) {
    dnewsCheck.checked = true;}
  else{
    dnewsCheck.checked = false;}
</script>
  </body>
</html>